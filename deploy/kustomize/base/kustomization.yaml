apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Main application namespace and resources
  - namespace.yaml
  - secrets.yaml
  - configmap.yaml

  # Service deployments (in animeenigma namespace)
  - services/gateway.yaml
  - services/auth.yaml
  - services/catalog.yaml
  - services/streaming.yaml
  - services/player.yaml
  - services/rooms.yaml
  - services/scheduler.yaml
  - services/web.yaml

  # Monitoring stack (in monitoring namespace - has its own namespace spec)
  - monitoring/namespace.yaml
  - monitoring/prometheus/rbac.yaml
  - monitoring/prometheus/configmap.yaml
  - monitoring/prometheus/pvc.yaml
  - monitoring/prometheus/deployment.yaml
  - monitoring/prometheus/service.yaml
  - monitoring/grafana/secret.yaml
  - monitoring/grafana/pvc.yaml
  - monitoring/grafana/configmap-datasources.yaml
  - monitoring/grafana/configmap-dashboards.yaml
  - monitoring/grafana/deployment.yaml
  - monitoring/grafana/service.yaml

  # Admin tools (in monitoring namespace)
  - admin/pgadmin/secret.yaml
  - admin/pgadmin/configmap.yaml
  - admin/pgadmin/deployment.yaml
  - admin/pgadmin/service.yaml
  - admin/kubernetes-dashboard/rbac.yaml
  - admin/kubernetes-dashboard/deployment.yaml
  - admin/kubernetes-dashboard/service.yaml
  - admin/basic-auth-secret.yaml
  - admin/ingress.yaml

labels:
  - pairs:
      app.kubernetes.io/part-of: animeenigma
    includeSelectors: false
